buildscript {
    repositories {
        jcenter()
        maven { url 'http://oss.jfrog.org/artifactory/oss-snapshot-local/' }
    }

    dependencies {
        classpath 'io.github.swagger2markup:swagger2markup-gradle-plugin:1.3.1'
        classpath 'org.asciidoctor:asciidoctor-gradle-plugin:1.5.3'
        classpath 'org.asciidoctor:asciidoctorj-pdf:1.5.0-alpha.11'
    }
}

apply plugin: 'io.github.swagger2markup'
apply plugin: 'org.asciidoctor.convert'

convertSwagger2markup {
    swaggerInput file('api/swagger.yaml').getAbsolutePath()
    //swaggerInput file('default.yaml').getAbsolutePath()
    //outputDir file("${buildDir}/asciidoc")
    outputFile file("${buildDir}/asciidoc/swagger")
    config = ['swagger2markup.markupLanguage': 'ASCIIDOC']
}

asciidoctor {
  backends = ['html5', 'pdf']
  sourceDir = file("${buildDir}/asciidoc")

  outputDir = file('build/docs')
}
